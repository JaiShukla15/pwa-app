"use strict";(self.webpackChunkpwa=self.webpackChunkpwa||[]).push([[184],{2184:(v,c,s)=>{s.r(c),s.d(c,{ChatComponent:()=>b});var p=s(2096),r=s(6814),l=s(95),t=s(4769),g=s(5504);function m(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"li",27)(1,"a",28),t.NdJ("click",function(){const d=t.CHM(e).$implicit,C=t.oxw(2);return t.KtG(C.getSelectedChat(d.id))}),t.TgZ(2,"div",29)(3,"div"),t._UZ(4,"img",30)(5,"span",31),t.qZA(),t.TgZ(6,"div",32)(7,"p",33),t._uU(8),t.qZA(),t.TgZ(9,"p",34),t._uU(10),t.qZA()()(),t.TgZ(11,"div",32)(12,"p",35),t._uU(13),t.ALo(14,"date"),t.qZA(),t.TgZ(15,"span",36),t._uU(16,"3"),t.qZA()()()()}if(2&n){const e=a.$implicit;t.xp6(8),t.Oqu(null==e?null:e.name),t.xp6(2),t.Oqu(null==e?null:e.message),t.xp6(3),t.Oqu(t.xi3(14,3,e.createdAt,"hh:mm"))}}function h(n,a){if(1&n&&(t.ynx(0),t.TgZ(1,"div",24)(2,"ul",25),t.YNc(3,m,17,6,"li",26),t.ALo(4,"async"),t.qZA()(),t.BQk()),2&n){const e=t.oxw();let o;t.xp6(3),t.Q6J("ngForOf",null==(o=t.lcZ(4,1,e.users))?null:o.result)}}function _(n,a){if(1&n&&(t.TgZ(0,"div",39),t._UZ(1,"img",40),t.TgZ(2,"div")(3,"p",41),t._uU(4),t.qZA(),t.TgZ(5,"p",42),t._uU(6),t.ALo(7,"date"),t.qZA()()()),2&n){const e=t.oxw().$implicit;t.xp6(4),t.hij(" ",e.message," "),t.xp6(2),t.Oqu(t.xi3(7,2,e.createdAt,"MM/dd/yy h:mm:ss a"))}}function u(n,a){if(1&n&&(t.TgZ(0,"div",43)(1,"div")(2,"p",44),t._uU(3),t.qZA(),t.TgZ(4,"p",45),t._uU(5),t.ALo(6,"date"),t.qZA()(),t._UZ(7,"img",46),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(3),t.hij(" ",e.message," "),t.xp6(2),t.Oqu(t.xi3(6,2,e.createdAt,"MM/dd/yy h:mm:ss a"))}}function f(n,a){if(1&n&&(t.ynx(0),t.YNc(1,_,8,5,"div",37),t.YNc(2,u,8,5,"div",38),t.BQk()),2&n){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Q6J("ngIf",e.sender_id!==o.loggedInUser),t.xp6(1),t.Q6J("ngIf",e.sender_id===o.loggedInUser)}}function x(n,a){1&n&&(t.TgZ(0,"h5",47),t._uU(1," write something to start a conversation "),t.qZA())}let b=(()=>{class n{constructor(e){this.api=e,this.users=(0,p.of)(null),this.chat_info=[],this.loggedInUser=localStorage.getItem("userId"),this.selected_userId="",this.message=""}ngOnInit(){this.getChatUsers()}getChatUsers(){this.users=this.api.getAllUsers(),console.log(this.users,"USERS")}getSelectedChat(e){this.selected_userId=e,this.api.getSelectedChat(e).subscribe(o=>{this.chat_info=o.data,console.log(this.chat_info,"CHAT INFO $$$$$$$$")})}sendMessage(){this.api.sendMessage({receiver_id:this.selected_userId,message:this.message}).subscribe(()=>{console.log("MESSAGE SENT !"),this.chat_info.push({id:null,sender_id:this.loggedInUser,receiver_id:this.selected_userId,message:this.message,createdAt:Date.now()}),this.message=""})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(g.s))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-chat"]],standalone:!0,features:[t.jDz],decls:28,vars:6,consts:[[2,"background-color","#CDC4F9"],[1,"row"],[1,"col-md-12"],["id","chat3",1,"card",2,"border-radius","15px"],[1,"card-body"],[1,"col-md-6","col-lg-5","col-xl-4","mb-4","mb-md-0"],[1,"p-3"],[1,"input-group","rounded","mb-3"],["type","search","placeholder","Search","aria-label","Search","aria-describedby","search-addon",1,"form-control","rounded"],[4,"ngIf"],[1,"col-md-6","col-lg-7","col-xl-8"],["data-mdb-perfect-scrollbar","true",1,"pt-3","pe-3",2,"position","relative","max-height","70vh","overflow-y","auto"],[4,"ngFor","ngForOf"],["class","text-center display-6 py-6",4,"ngIf"],[1,"text-muted","d-flex","justify-content-start","align-items-center","mt-4",2,"position","absolute","bottom","200px","width","65%","padding","10px","border","2px solid #ccc","border-radius","8px","height","80px"],["src","https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-chat/ava6-bg.webp","alt","avatar 3",2,"width","40px","height","100%"],["type","text","id","exampleFormControlInput2","placeholder","Type message",1,"form-control","form-control-lg",3,"ngModel","ngModelChange"],["href","#!",1,"ms-1","text-muted"],[1,"fas","fa-paperclip"],["href","#!",1,"ms-3","text-muted"],[1,"fas","fa-smile"],["href","#!",1,"ms-3"],[1,"fas","fa-paper-plane"],[1,"btn","btn-primary",3,"click"],["data-mdb-perfect-scrollbar","true",2,"position","relative","height","800px"],[1,"list-unstyled","mb-0"],["class","p-2 border-bottom",4,"ngFor","ngForOf"],[1,"p-2","border-bottom"],["href","javascript:void(0)",1,"d-flex","justify-content-between",3,"click"],[1,"d-flex","flex-row"],["src","https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-chat/ava1-bg.webp","alt","avatar","width","60",1,"d-flex","align-self-center","me-3"],[1,"badge","bg-success","badge-dot"],[1,"pt-1"],[1,"fw-bold","mb-0"],[1,"small","text-muted"],[1,"small","text-muted","mb-1"],[1,"badge","bg-danger","rounded-pill","float-end"],["class","d-flex flex-row justify-content-start",4,"ngIf"],["class","d-flex flex-row justify-content-end",4,"ngIf"],[1,"d-flex","flex-row","justify-content-start"],["src","https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-chat/ava6-bg.webp","alt","avatar 1",2,"width","45px","height","100%"],[1,"small","p-2","ms-3","mb-1","rounded-3",2,"background-color","#f5f6f7"],[1,"small","ms-3","mb-3","rounded-3","text-muted","float-end"],[1,"d-flex","flex-row","justify-content-end"],[1,"small","p-2","me-3","mb-1","text-white","rounded-3","bg-primary"],[1,"small","me-3","mb-3","rounded-3","text-muted"],["src","https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-chat/ava1-bg.webp","alt","avatar 1",2,"width","45px","height","100%"],[1,"text-center","display-6","py-6"]],template:function(e,o){if(1&e&&(t.TgZ(0,"section",0)(1,"div")(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",1)(7,"div",5)(8,"div",6)(9,"div",7),t._UZ(10,"input",8),t.qZA(),t.YNc(11,h,5,3,"ng-container",9),t.ALo(12,"async"),t.qZA()(),t.TgZ(13,"div",10)(14,"div",11),t.YNc(15,f,3,2,"ng-container",12),t.YNc(16,x,2,0,"h5",13),t.qZA(),t.TgZ(17,"div",14),t._UZ(18,"img",15),t.TgZ(19,"input",16),t.NdJ("ngModelChange",function(d){return o.message=d}),t.qZA(),t.TgZ(20,"a",17),t._UZ(21,"i",18),t.qZA(),t.TgZ(22,"a",19),t._UZ(23,"i",20),t.qZA(),t.TgZ(24,"a",21),t._UZ(25,"i",22),t.qZA(),t.TgZ(26,"button",23),t.NdJ("click",function(){return o.sendMessage()}),t._uU(27,"Send"),t.qZA()()()()()()()()()()),2&e){let i;t.xp6(11),t.Q6J("ngIf",null==(i=t.lcZ(12,4,o.users))||null==i.result?null:i.result.length),t.xp6(4),t.Q6J("ngForOf",o.chat_info),t.xp6(1),t.Q6J("ngIf",!o.chat_info.length),t.xp6(3),t.Q6J("ngModel",o.message)}},dependencies:[r.ez,r.sg,r.O5,r.Ov,r.uU,l.u5,l.Fj,l.JJ,l.On],styles:["#chat3[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-color:transparent}#chat3[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:transparent;box-shadow:inset 0 0 0 1px transparent}.badge-dot[_ngcontent-%COMP%]{border-radius:50%;height:10px;width:10px;margin-left:2.9rem;margin-top:-.75rem}.rounded[_ngcontent-%COMP%]{border:1px solid #ccc!important}"]}),n})()}}]);